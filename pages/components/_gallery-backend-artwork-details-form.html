
      {$artwork = $scope.artwork}
      <h5 class="optional">(Optional: Add as much or as little information about your art as you need to)</h5>
      <div class="mt20">
          <a href="https://vimeo.com/388299082" class="btn btn-info button-large popup-iframe" data-effect="mfp-fade"><i class="fa fa-play-circle"></i>Art Details Tutorial</a>
        </div><br>
      <form class="ajax-submit" data-handler="save-artwork" data-success_handler="gbe_artwork_handler" id="artwork">
        <input hidden="1" name="id" type="hidden" value="{$artwork.id}">
        <input hidden="1" name="obj_id" type="hidden" value="{$artwork.id}">
        <input hidden="1" name="obj_type" type="hidden" value="artwork">      
        <!-- <input hidden="1" name="next_tab" type="hidden" value="media">  -->     
    <input hidden="1"  type="hidden" id="user_id" value="{$minisite.user_id}"/>

    <input hidden="1" name="site_url" type="hidden" id="site_url" value="{$scope.site_url}"/>

    <input hidden="1" name="profile_id" type="hidden" id="profile_id" value="{$scope.user.profile_id}"/>

        <div class="row">
          <div class="form-group col-sm-6">
            <label for="artwork-artwork_type">Category</label>
            {"type"|object_select:"artwork_type":["class" => "form-control", "value" => $artwork.type]}
          </div>
        </div>
                    
        <div class="row">        
          <div class="form-group col-sm-3 col-xs-6">
            <label for="artwork-primary_year">Primary Year</label>
            <input type="text" class="form-control" name="primary_year" value="{$artwork.primary_year}" maxlength="4">
          </div>
  
          {$year_types = ['', 'Created', 'Circa', 'Painted', 'Printed', 'Photographed', 'Negative', 'Filmed', 'Sculpted', 'Published', '1st Edition', 'Started']}
          <div class="form-group col-sm-3 col-xs-6">
            <label for="artwork-primary_year_type">Description of Year</label>
            <select class="form-control auto-select" id="artwork-primary_year_type" name="primary_year_type" data-default="Created" data-value="{$artwork.primary_year_type|default:'Created'}">
              {foreach from=$year_types item=type}
                <option value="{$type}">{$type}</option>
              {/foreach}                                            
            </select>
          </div>
          
          {$year_types = ['', 'Printed', 'Cast', 'Restored', 'Current Edition', 'Finished']}
          <div class="form-group col-sm-3 col-xs-6">
            <label for="artwork-secondary_year">Secondary Year</label>
            <input type="text" class="form-control" name="secondary_year" value="{$artwork.secondary_year}" maxlength="4">
          </div>
  
          <div class="form-group col-sm-3 col-xs-6">
            <label for="artwork-secondary_year_type">Description of Year</label>
            <select class="form-control auto-select" id="artwork-secondary_year_type" name="secondary_year_type"  data-default="" data-value="{$artwork.secondary_year_type|default:''}">
              {foreach from=$year_types item=type}
                <option value="{$type}">{$type}</option>
              {/foreach}                                            
            </select>
          </div>
        </div>
        
        {* Below are category (type) dependend fields *}     
        <div class="row type-10 type-11 type-20 type-21 type-22 type-30 type-40">        
          <div class="form-group col-sm-2 col-xs-6">
            <label for="artwork-height">Height</label>
            <input type="text" class="form-control" name="height" value="{$artwork.height}" maxlength="5">
          </div>
          <div class="form-group col-sm-2 col-xs-6">
            <label for="artwork-width">Width</label>
            <input type="text" class="form-control" name="width" value="{$artwork.width}" maxlength="5">
          </div>
          <div class="form-group col-sm-2 col-xs-6 type-30 type-40">
            <label for="artwork-depth">Depth</label>
            <input type="text" class="form-control" name="depth" value="{$artwork.depth}" maxlength="5">
          </div>
          <div class="form-group col-sm-2 col-xs-6">
            <label for="artwork-unit">Unit</label>
            <select class="form-control auto-select" id="artwork-unit" name="unit" data-default="cm" data-value="{$artwork.unit|default:'cm'}">
              {$units = ['', 'cm', 'meter', 'inches', 'feet','pixels']}
              {foreach from=$units item=unit}
                <option value="{$unit}">{$unit}</option>
              {/foreach}                                            
            </select>
          </div>
        </div>
        
        <div class="row type-10 type-11 type-20 type-21 type-22">
          <div class="form-group col-sm-4 col-xs-6">
            <label for="media-frame">Frame</label>
            {$yes_no = [0 => "Leave Blank", -1 => "Unframed", 1 => "Framed"]}
            {html_options name="frame" class="form-control" options=$yes_no selected=$artwork.frame}                                            
          </div>
          <div class="form-group col-sm-4 col-xs-6">
            <label for="media-passepartout">Passe-Partout</label>
            {$yes_no = [0 => "Leave Blank", -1 => "No Passe-partout"]}
            {html_options name="passepartout" class="form-control" options=$yes_no selected=$artwork.passepartout}                                            
          </div>          
        </div>   

        <div class="row type-45">
          <div class="form-group col-sm-4 col-xs-6">
            <label for="media-frame">Medium</label>
            {$yes_no = [0 => "Leave Blank", 1 => "Still Image" ,2=>"Animated Image", 3=>"Video", 4=>"Audio", 5=> "3D Model"]}
            {html_options name="frame" class="form-control" options=$yes_no selected=$artwork.frame}                                            
          </div>
          <div class="form-group col-sm-4 col-xs-6">
            <label for="media-passepartout">Block Chain</label>
            {$yes_no = [ 1 => "Etherum", 2=> "Polygon",3=>"Solana",4=>"Tezos",5=>"Flow",6=>"WAX",7=>"BSC",8=>"Leave Blank"]}
            {html_options name="passepartout" class="form-control" options=$yes_no selected=$artwork.passepartout}                                            
          </div>          
        </div>   
        
        {* film/video *}
        <div class="row type-50">
          <div class="form-group col-sm-4 col-xs-6">
            <label for="artwork-video_time">Runtime</label>
            <input type="text" class="form-control" name="video_time" value="{substr($artwork.video_time, 0, 5)}" maxlength="128">
          </div>  
          <div class="form-group col-sm-4 col-xs-6">
            <label for="artwork-video_director">Director</label>
            <input type="text" class="form-control" name="video_director" value="{$artwork.video_director}" maxlength="128">
          </div> 
          <div class="form-group col-sm-4 col-xs-6">
            <label for="artwork-video_producer">Producer</label>
            <input type="text" class="form-control" name="video_producer" value="{$artwork.video_producer}" maxlength="128">
          </div>  
          <div class="form-group col-sm-4 col-xs-6">
            <label for="artwork-video_narrator">Narrator</label>
            <input type="text" class="form-control" name="video_narrator" value="{$artwork.video_narrator}" maxlength="128">
          </div>  
          <div class="form-group col-sm-4 col-xs-6">
            <label for="artwork-video_sound">Sound</label>
            <input type="text" class="form-control" name="video_sound" value="{$artwork.video_sound}" maxlength="128">
          </div>  
          <div class="form-group col-sm-4 col-xs-6">
            <label for="artwork-video_editor">Editor</label>
            <input type="text" class="form-control" name="video_editor" value="{$artwork.video_editor}" maxlength="128">
          </div>  
          <div class="form-group col-sm-4 col-xs-6">
            <label for="artwork-video_cast">Cast</label>
            <input type="text" class="form-control" name="video_cast" value="{$artwork.video_cast}" maxlength="128">
          </div>  
        </div>
        
        <div class="row type-10 type-11 type-30 type-40 type-50">
          
          <div class="form-group type-40 type-30 col-sm-3 col-xs-4">
            <label for="media-frame">Presentation</label>
            {$presentation = [10 =>"Leave Blank", 20 =>"Free Standing", 30 =>"Pedestal Mounted", 40 =>"Wall Mounted", 50 =>"Hanging", 60 =>"Installation"]}
            {html_options name="presentation" class="form-control" options=$presentation selected=$artwork.presentation}                                            
          </div>     
          

          <div class="form-group col-sm-3 col-xs-4">
            <label for="artwork-editions">Number in series</label>
             <a data-toggle="tooltip" title="Set the number in series to 1 if there in only one original, and to 0 if there is no limit on prints/ copies"> <i class="fa fa-info-circle"></i></a>
            <input type="text" class="form-control" name="editions" value="{$artwork.editions|default:'1'}" maxlength="4">
          </div>
  
          <div class="form-group col-sm-3 col-xs-4">
            <label for="artwork-count">Edition No.</label>
            <input type="text" class="form-control" name="edition" value="{$artwork.edition}" maxlength="4">
          </div>
        </div>
        
        <div class="form-group col-sm-4 col-xs-6">
          <label for="artwork-price">Currency</label>
          {"currency"|object_select:"currency":["class" => "form-control", "value" => $artwork.currency, "search" => ["accepted" => 1]]}                
        </div>
        <div class="form-group col-sm-4 col-xs-6">
          <label for="artwork-price">Price</label>
          {* <a data-toggle="tooltip" title="If you want to have the price on inquiry, set the price to zero and 'Available for sale' to 'Yes'. Price will be hidden if 'Available for sale' is set to 'Hide'"> <i class="fa fa-info-circle"></i></a> *}
          <input type="text" class="form-control" name="price" value="{$artwork.price}" maxlength="10">
        </div>
        
        <div class="form-group col-sm-4">
          <label for="artwork-price_option">Price Options</label>
          <a data-toggle="tooltip" title="'No' will show red dot, 'Yes' shows green dot, 'Hide' hides the dot and the price."> <i class="fa fa-info-circle"></i></a>
          {$options = [1 => "Display Price", 0 => "Hide Price", -1 => "Price on inquiry"]}
          {html_options name="price_option" class="form-control" options=$options selected=$artwork.price_option}                                            
          <!--input name="available" value="1" class="form-control" type="checkbox" checked="{if ($artwork.available)}checked{/if}"-->
        </div>
        
        <div class="row">
          <div class="form-group col-sm-12">
            <label for="description">Description of artwork</label>
            <textarea class="summernote form-control special" data-height="50" name="description">{$artwork.description}</textarea>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-sm-12">
            <label for="comment">Private/ Sales Notes</label>
            <textarea class="summernote form-control special" data-height="50" name="comment">{$artwork.comment}</textarea>
          </div>
        </div>
        <input type="submit" class="btn btn-success" value="Save" id="submit">
            
      </form>
      <div class="gap gap-small"></div>

<!-- Modal -->
<div class="modal fade xl" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  	<div class="modal-dialog media" role="dialog">
    	<div class="modal-content">
		  	<div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Select image from your Media Drive</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          	<span aria-hidden="true">&times;</span>
		        </button>
		  	</div>
      		<div class="modal-body " id="media-content">
      		</div>
	      	<div class="modal-footer">
	        	<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
	        	<!-- <button type="button" class="btn btn-primary">Save changes</button> -->
	      	</div>
    	</div>
  	</div>
</div>

<script type="text/javascript">
	var HightlightButton = function(context) {  
		var ui = $.summernote.ui;  
		var button = ui.button({  
			contents: ' Get Image From Media Drive',  
			tooltip: 'Highlight text with red color',  
			click: function() {  
				context.invoke('editor.foreColor', 'red');  
			//  do whatever you want here like open popup  
			}  
		});  
		return button.render();  
	}  

	$(document).ready(function() { 

		var profile_id=$("#profile_id").val();
        var user_id=$("#user_id").val();
        var site_url=$("#site_url").val();
		
	  	$('.summernote').summernote({  
			toolbar: [  
				['style', [ 'bold', 'italic', 'underline', 'clear']],  
				['font', ['strikethrough', 'superscript', 'subscript']], 
				['fontsize', ['fontsize']],
				['color', ['color']], 
				['para', ['ul', 'ol', 'paragraph']],  
				['height', ['height']],
				['insert', ['link', 'picture', 'video']],
				['style', ['highlight']],  
			]
	  	});  
		
		$(".modal-body .note-group-select-from-files ").after("<a href='javascript:void(0)' id='media_trigger' class='btn btn-success mt10 mb20'>Choose image from Media Drive</a><p><strong>Or</strong></p>");
		
		$(".form-group.note-group-select-from-files").hide();
		$(".form-group.note-group-image-url .note-form-label").text("Use image URL from the internet");

    	$(document).on('click', '.dragme', function (e) {
        	// console.log("dragmeeeeeeeeeeeeeeeeee")
			e.stopPropagation();
	    	e.stopImmediatePropagation();
	    	if (!e) {
				var e = window.event;
			}
            if(e.preventDefault) e.preventDefault();

			// IE uses srcElement, others use target
			var targ = e.target ? e.target : e.srcElement;
			console.log(targ);
			if(targ){
        		// var copyText = document.getElementById("site_url");
        		// var as= targ.src + 'as'
				var els=document.getElementsByClassName("note-image-url")[0];
		        els.value = targ.src;
            	$(".note-image-btn").click(); 
            	$('#exampleModal').modal('hide');
            }

        });

    	$(document).on('click', '.media_folder', function (e) {

    		e.stopPropagation();
	    	e.stopImmediatePropagation();
	    	if (!e) {
				var e = window.event;
			}
            if(e.preventDefault) e.preventDefault();

			// IE uses srcElement, others use target
			var targ = e.target ? e.target : e.srcElement;
			if(targ){
        		console.log("targ"+targ.folder)
        		folder_id=targ.folder
        		rank=targ.rank
        		$("#exampleModal").modal('show');
	            if(rank==1)
	            	var url=site_url+'ajax.php?oper=get-rows&obj_type=media&filters=%7B%22user_id%22%3A21109%2C%22folder_id%22%3A0%2C%22active%22%3A1%7D&search=&order=asc&offset=0&limit=100&_=1640843323249';
	            	
	            else if(rank==0)
	            	var url=site_url+'ajax.php?oper=get-rows&obj_type=media&&&filters=%7B%22folder_id%22%3A%22'+folder_id+'%22%2C%22active%22%3A1%7D&search=&order=asc&offset=0&limit=10&_=1640843323251';
				const myNode = document.getElementById("media-content");
				myNode.innerHTML = '';
				$.ajax({
		            url: url,
		            data: {
		                text: $("textarea[name=Status]").val(),
		            },
		            success:function(responsedata){
		            	// console.log(responsedata)
		            	images=responsedata.rows;
		            	images.forEach(async function(image) {
		            		var img = document.createElement('img');
				            img.src =site_url.slice(0, -1)  + image.path + 'medium/' + image.filename;
				            img.className="dragme";	

				            // var x = document.createElement("SPAN");
			             //    x.innerHTML="&nbsp </br>"+image.filename;

				            // var label = document.createElement('label');
			             //    label.innerHTML="&nbsp </br>"+image.filename;
			                
				            document.getElementById('media-content').appendChild(img);
				            // document.getElementById('media-content').appendChild(x);
				            // document.getElementById('media-content').appendChild(label);
						})
			           
		            	// for (var i = 0; i < data.length; i++) {
		            	// 	var img = document.createElement('img');
				           //  img.src = data[i].thumbnailUrl;
				           //  document.getElementById('media-content').appendChild(img);
		            	// }
			        },
		            dataType : 'json'

		        });
			}
        });

        $('#media_trigger').click(function(e) { 
            // alert(1);
            // $("#exampleModal").modal('show');
            var user_id=$("#user_id").val();
            var site_url=$("#site_url").val();
			const myNode = document.getElementById("media-folder");
			if(myNode!=null)
			myNode.innerHTML = '';
            // console.log(user_id);
            $.ajax({
	            url: site_url+'ajax.php?oper=get-rows&obj_type=media_folder&filters=%7B%22user_id%22%3A'+user_id+'%2C%22active%22%3A1%7D&search=&order=asc&offset=0&limit=10&_=1640687353767',
	            data: {
	                text: $("textarea[name=Status]").val(),
	            },
	            success:function(responsedata){
	            	folders=responsedata.rows;
	            	// console.log("folders")
	            	console.log(folders)
					$(".modal-body .note-group-select-from-files ").after("<div id='media-folder'></div>");

	            	folders.forEach(async function(folder) {
		                var fold = document.createElement('img');
			            fold.src =site_url+'img/artist/default.jpg';
			            fold.alt=folder.id;
			            fold.title=folder.filename;
			            fold.className="media_image";	
			            fold.folder=folder.id;
			            fold.rank=folder.rank;
			            document.getElementById('media-folder').appendChild(fold);
					});
					
					$(".media_image").wrap('<div class="media_folder"></div>');
					$(".media_folder").prepend('<i class="fa fa-folder-open"></i>');
					
					$(".media_folder img.media_image").each(function() {
					  const $img = $(this);
					  const imgtitle = $img.attr("title");
					  setTimeout(function() {
						$img.after("<p class='media_folder_title'>" + imgtitle + "</p>");
					  }, 100);
					});
					
		        },
	            dataType : 'json'
	        });
        });
	}); 
</script>

      <script>
      var type = '{$artwork.type}';
      console.log("artwork type = " + type);
      $("#tab6_link").hide();
      {literal}
      $(function() {
        console.log( "ready!" );
        awb_set_type(type);
      });
      $(document).on("change",'#type',function() {
        var val = $(this).val();
        awb_set_type(val);
      });
      function awb_set_type(val) {
        $(".type-10, type-11, .type-20, .type-21, type-22, .type-30, .type-40, .type-50, .type-60, .type").hide();
        console.log("showing type " + val);
        if(val) {
          $(".type-" + val).show();  
        }
      }
      </script>
      <style type="text/css">
    #media-folder{
        overflow: hidden;
        margin: 2em 0px 1.5em;
    }   
    #media-folder .media_folder{
        width: 25%;
        display: block;
        float: left;
        text-align: center;
        position: relative;
    }   
    #media-folder .media_folder .media_image {
        position: absolute;
        left: 0px;
        top: 0px;
        z-index: 99;
        cursor: pointer;
        width: 100%;
        height: 100%;
        padding: 0px;
        opacity: 0;
    }   
    #media-folder .media_folder i{
        color: #3f859b;
        font-size: 6em;
    }
    #media-folder .media_folder .media_folder_title{
        color: #000;
        text-transform: capitalize;
        margin: 0px;
    }
    .modal img{
        height: 150px;
        width: auto;
        padding-left: 15px;
        padding-right: 15px;
        padding-top: 15px;
        padding-bottom: 15px;
    }
    .media{
        width: 90%;
        margin: 5;
        padding: 0;
      }
    #media-content{
        height: 500px;
        overflow-y: scroll;
    }

</style>
      {/literal}
      