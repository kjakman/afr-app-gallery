{{"extend": "minisites/index.html"}}
{$latestexhibitions = $scope.latest}

{block name=title}
  <h2 class="page_title">{$minisite_pageObj.page_title}</h2>    
{/block}
{block name=content} 
  {$data = json_decode($minisite_pageObj.data, TRUE)}
  {$count = 0}
  {$arr = []}
  {if ($data.show_recent == 1)}
    {$arr = ['future' => $data.show_future, 'current' => $data.show_current, 'past' => $data.show_past]}
  {else}
    {$arr = ['past' => $data.show_past, 'current' => $data.show_current, 'future' => $data.show_future]}
  {/if}
  
  <div class="row"> 
    {foreach from=$arr key=key item=val}
      {if (($val) && ($data_exist[$key]))}
        <div class="photo-grid-row col-md-12">
          <h4 style="text-align: left;">{$key}</h4>
          <ul class="photo-grid gallery-list natural row">
            {foreach from=$exhibitions item=exhibition}  
              {if ($exhibition.current == $key)}        
                <li class="photo-grid-container gallery-list-item pdf-thumb-box gallery-artwork-item col-sm-4" data-index="{$index}">
                <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}">
                  <figure id="{$exhibition.id}" data-sharer_id="{$scope.user_id}" data-index="{$index}" class="__vp-plugin-container vp-loader-photoswipe">         
                    <div class="__vp-flip-container" ontouchstart="this.classList.toggle('hover');">           
                      <div class="__vp-flipper">             
                      <div class="__vp-flip-front">               
                        <img class="__vp-plugin-image center-cropped" src="{$exhibition|collection_photo:'medium'}" alt="{$exhibition.name}">    
                      </div>             
                      <div class="__vp-flip-back __vp-plugin-hover">               
                        <img class="__vp-flip-back-image" src="{$exhibition|collection_photo:'medium'}" alt="{$exhibition.name}">                
                        <div class="__vp-flip-back-card">  
                        <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}">               
                          <h2>{$exhibition.title}</h2>                                         
                          <!-- <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}" class="__vp-info __vp-view-button" id="__vp-view-button-1355">View</a>   -->
                          <div class="mt10">{$exhibition|artists}</div> 
                          <div>{$exhibition.start_date|date_format:"%e %b %Y"} - {$exhibition.end_date|date_format:"%e %b %Y"}</div> 
                        </a>            
                        </div>                                                                
                      </div>           
                      </div>         
                    </div> 
                    <div class="exhibition-title text-center mt10">
                      <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}"><h4 class="description">{$exhibition.title}</h4></a>
                      <h2 class="description">{$exhibition|artists}</h2>
                      <h3 class="description"><i class="glyphicon glyphicon-time"></i> {$exhibition.start_date|date_format:"%e %b %Y"} - {$exhibition.end_date|date_format:"%e %b %Y"}</h3>
                    </div>          
                  </figure>
                </a>
                </li>
              {/if} 
              {$count = 1}
            {/foreach}
          </ul>
        </div>
      {/if}
    {/foreach}     
      
    {if (($data.show_latest) && (!$count))}
      <h4 style="text-align: left;">Latest</h4>
      <div class="item-container">
        {foreach from=$latestexhibitions item=exhibition}    
          <div class="item-grid-sizer"></div>
          <div class="item-gutter-sizer"></div>
          <div class="item-grid">
             <figure id="{$exhibition.id}" data-sharer_id="{$scope.user_id}" data-index="{$index}" class="__vp-plugin-container vp-loader-photoswipe">         
              <div class="__vp-flip-container" ontouchstart="this.classList.toggle('hover');">           
                <div class="__vp-flipper">             
                <div class="__vp-flip-front">               
                  <img class="__vp-plugin-image center-cropped" src="{$exhibition|collection_photo:'medium'}"  alt="{$exhibition.name}">             
                </div>             
                <div class="__vp-flip-back __vp-plugin-hover">               
                  <img class="__vp-flip-back-image" src="{$exhibition|collection_photo:'small'}" alt="{$exhibition.name}">               
                  <div class="__vp-flip-back-card"> 
                  <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}">                
                    <h2>{$exhibition.title}</h2>   
                    <!-- <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}" class="__vp-info __vp-view-button" id="__vp-view-button-1355">View</a>  -->
                    <div class="mt10">{$exhibition|artists}</div> 
                    <div>{$exhibition.start_date|date_format:"%e %b %Y"} - {$exhibition.end_date|date_format:"%e %b %Y"}</div>    
                  </a>               
                  </div>                                                                
                </div>           
                </div>         
              </div> 
              <div class="exhibition-title text-center mt10">
                <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}"><h4 class="description">{$exhibition.title}</h4></a>
                <h2 class="description">{$exhibition|artists}</h2>
                <h3 class="description"><i class="glyphicon glyphicon-time"></i> {$exhibition.start_date|date_format:"%e %b %Y"} - {$exhibition.end_date|date_format:"%e %b %Y"}</h3>
              </div>        
            </figure>
          </div>
        {/foreach}
      </div> 
    {/if}
  </div> 
{/block}

