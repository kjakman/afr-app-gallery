{{"extend": "minisites/index.html"}}
{$latestexhibitions = $scope.latest}

{block name=title}
	<h2 class="page_title">{$minisite_pageObj.page_title}</h2>
{/block}  

{block name=content} 

{$data = json_decode($minisite_pageObj.data, TRUE)}
{if ($data.show_current)} {$current = 'current'} {/if}
{if ($data.show_past)} {$past = 'past'} {/if}
{if ($data.show_selection)} 
     {if ($data.show_past)}
       {$selection = 'selection'} 
     {/if}  
    {/if}
{if ($data.show_future)} {$future = 'future'} {/if}
{$count = 0} {$empty_chk = 0}
{if ($exhibitions)}
<div class="row">
	<div class="col-sm-12">
		<div class="item-container">
			<div class="item-grid-sizer"></div>
			<div class="item-gutter-sizer"></div>
			{foreach from=$exhibitions item=exhibition}
			  {if (($exhibition.current == $future) || ($exhibition.current == $current) || ($exhibition.current == $past) || ($exhibition.current == $selection))}
				<div class="item-grid effect-{$ms.hover_type}">        
					<div class="hover_style">				
					  <figure class="effect-{$ms.hover_type}">
						<div class="hover_cover">
                                                        {if ($exhibition.title_image)}                                              
                                                            <img class="center-cropped" src="{$exhibition|collection_photo:'medium'}"  alt="{$exhibition.name}">
                                                        {else}
                                                            <img class="center-cropped" src="/img/exhibition/default.jpg"  alt="">
                                                        {/if}
							{{"include": "minisites/caption/figcaption.html"}}	
							<a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}">View more</a>
						</div>				
					  </figure>
					</div>
					{{"include": "minisites/caption/exh_details.html"}}       
				</div>
                             {$count = 1}
                            {else}
                            {if ($empty_chk == 0)}
                            {$empty_chk = 1}
                              <div class="smart_filter_exhibirion_page"> 
                                      {{"include": "minisites/exhibition_empty_message.html"}}  
                              </div> 
                            {/if}
			  {/if}
			{/foreach}
                        

			{if (($data.show_latest) && (!$count))}
			  {foreach from=$latest_exhibitions item=exhibition}
				<h5 class="yseparator" style="text-align: left;">Latest</h5>
				<div class="item-grid effect-{$ms.hover_type}">
					<div class="hover_style">				
					  <figure class="effect-{$ms.hover_type}">
						<div class="hover_cover">
                                                        {if ($exhibition.title_image)}
                                                            <img class="center-cropped" src="{$exhibition|collection_photo:'medium'}"  alt="{$exhibition.name}">
                                                        {else}
                                                            <img class="center-cropped" src="/img/exhibition/default.jpg"  alt="">
                                                        {/if}    
							{{"include": "minisites/caption/figcaption.html"}}	
							<a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}">View more</a>
						</div>		
					  </figure>
					</div>
					{{"include": "minisites/caption/exh_details.html"}}      
				</div>
			  {/foreach}
			
{/if}
		</div>
	</div>
</div>
{else}
{{"include": "minisites/exhibition_empty_message.html"}} 
{/if}
<script src='https://cdnjs.cloudflare.com/ajax/libs/masonry/3.3.2/masonry.pkgd.min.js'></script>
<script>
	jQuery(window).on('load', function() {
  
	  $('.item-container').masonry({
		columnWidth : '.item-grid-sizer',
		gutter : 15,
		itemSelector : '.item-grid',
		percentPosition : 'true',
		fitWidth: true,
	  });
	  
	});
</script>
{/block}