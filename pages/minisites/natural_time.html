{{"extend": "minisites/index.html"}}
{$latestexhibitions = $scope.latest}

{block name=title}
  <h2 class="page_title">{$minisite_pageObj.page_title}</h2>    
{/block}
{block name=content} 
  {$data = json_decode($minisite_pageObj.data, TRUE)}
  {$count = 0}
  {$arr = []}
  {if ($data.show_recent == 1)}
    {$arr = ['future' => $data.show_future, 'current' => $data.show_current, 'past' => $data.show_past]}
  {else}
    {$arr = ['past' => $data.show_past, 'current' => $data.show_current, 'future' => $data.show_future]}
  {/if}
  
  <div class="row"> 
    <div class="col-md-3 col-sm-12 col-xs-12 text-left">
    </div>
    <div class="col-md-8 col-sm-12 detail-text">
      {foreach from=$arr key=key item=val}
        {if (($val) && ($data_exist[$key]))}
          <h4 style="text-align: left;">{$key}</h4>
          <div class="row artists-row mobile-row artists-list-row artists-grid">
            {foreach from=$exhibitions item=exhibition}  
              {if ($exhibition.current == $key)}        
                <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12 text-left artist-grid-col">
                  <div class="image-container">  
                    <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}">
                      <img src="{$exhibition|collection_photo:'small'}" class="img-responsive" alt="{$exhibition.name} Exhibition">
                    </a>
                  </div>
                  <div class="artist-name text-center mt10">
                    <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}"><h4 class="description">{$exhibition.title}</h4></a>
                    <h2 class="description">{$exhibition|artists}</h2>
                    <h3 class="description"><i class="glyphicon glyphicon-time"></i> {$exhibition.start_date|date_format:"%e %b %Y"} - {$exhibition.end_date|date_format:"%e %b %Y"}</h3>
                  </div>
                </div>   
              {/if} 
              {$count = 1}
            {/foreach}
          </div> 
        {/if}
      {/foreach}
      
      {if (($data.show_latest) && (!$count))}
        <h4 style="text-align: left;">Latest</h4>
        <div class="row artists-row mobile-row artists-list-row artists-grid">
          {foreach from=$latestexhibitions item=exhibition}    
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12 text-left artist-grid-col">
              <div class="image-container">  
                <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}">
                  <img src="{$exhibition|collection_photo:'small'}" class="img-responsive" alt="{$exhibition.name} Exhibition">
                </a>
              </div>
              <div class="artist-name text-center mt10">
                <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}"><h4 class="description">{$exhibition.title}</h4></a>
                <h2 class="description">{$exhibition|artists}</h2>
                <h3 class="description"><i class="glyphicon glyphicon-time"></i> {$exhibition.start_date|date_format:"%e %b %Y"} - {$exhibition.end_date|date_format:"%e %b %Y"}</h3>
              </div>
            </div>   
            {$count = 1}
          {/foreach}
        </div> 
      {/if}
    </div>
  </div> 
{/block}

