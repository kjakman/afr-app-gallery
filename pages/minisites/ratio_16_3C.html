
{{"extend": "minisites/index.html"}}
{$latestexhibitions = $scope.latest}

{block name=title}
  <h2 class="page_title">{$minisite_pageObj.page_title}</h2>    
{/block}

{block name=content}
<style>
.item-container{
  margin:0px auto;
}
.item-grid {
  display: block;
  padding:0px 15px;
    float: left;
  overflow: hidden;
  z-index: 1;
}
.item-grid-contnt{
  
}
.item-grid h3 {
  color: #000;
}
.item-grid p {
  color: #5b5b5b;
}
.item-grid img {
  width: 100%;
  height: auto;
  display: block;
}
.item-grid-sizer, .item-grid {
  width: 32%;
}
.frame-square {
	display:block;
	width: 100%;
	overflow: hidden;
	position: relative;
}
.ratio169{
	padding-top: 56.25%;
}
.frame-square img {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0px;
    right: 0px;
    bottom: 0px;
    left: 0px;
    object-fit: cover;
}
@media screen and (max-width: 750px) {
  .item-grid-sizer, .item-grid {
    width: 46%;
  }
}
@media screen and (max-width: 500px) {
  .item-grid-sizer, .item-grid {
    width: 100%;
  }
}
</style>
{$data = json_decode($minisite_pageObj.data, TRUE)}
{$count = 0}
<div class="item-container">
  <div class="item-grid-sizer"></div>
  <div class="item-gutter-sizer"></div>
  {foreach from=$exhibitions item=exhibition}
    <div class="item-grid">
      <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}" class="cms-link gallery-link" data-data='{$json}'>
		<span class="frame-square ratio169">
			<img src="{$exhibition|collection_photo:'medium'}" class="">
		</span>
      </a>
      <br>
      <div class="item-grid-contnt text-center">
        <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}" class="cms-link gallery-link" data-data='{$json}'><h4 class="description">{$exhibition.title}</h4></a>
        <h2 class="description">{$exhibition|artists} </h2>
        <h3 class="description">{$exhibition.start_date|date_format:"%e %b %Y"} - {$exhibition.end_date|date_format:"%e %b %Y"}</h3>
      </div>
    </div>
    {$count = 1}
  {/foreach}

  {if (($data.show_latest) && (!$count))}
    {foreach from=$latestexhibitions item=exhibition}
    <div class="item-grid">
      <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}" class="cms-link gallery-link" data-data='{$json}'>
		<span class="frame-square ratio169">
			<img src="{$exhibition|collection_photo:'medium'}" class="">
		</span>
      </a>
      <br>
      <div class="item-grid-contnt text-center">
        <a href="{$basepath}/{$exhibition.page_slug}/{$exhibition.slug}" class="cms-link gallery-link" data-data='{$json}'><h4 class="description">{$exhibition.title}</h4></a>
        <h2 class="description">{$exhibition|artists} </h2>
        <h3 class="description">{$exhibition.start_date|date_format:"%e %b %Y"} - {$exhibition.end_date|date_format:"%e %b %Y"}</h3>
      </div>
    </div>
    {/foreach}
  {/if}
</div>

<script src='https://cdnjs.cloudflare.com/ajax/libs/masonry/3.3.2/masonry.pkgd.min.js'></script>
<script>
  jQuery(window).on('load', function() {
  
    $('.item-container').masonry({
    columnWidth : '.item-grid-sizer',
    gutter : 15,
    itemSelector : '.item-grid',
    percentPosition : 'true',
    fitWidth: true,
    });
    
  });
</script>
{/block}